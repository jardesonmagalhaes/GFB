<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jardeson ORG - Gestão Financeira</title>
    
    <!-- Tailwind CSS para um design moderno e responsivo -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome para ícones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">

    <style>
        /* Estilo base com a fonte Inter */
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Animação para a entrada de novos itens na lista */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        
        /* Estilização da barra de rolagem para um visual mais limpo */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1f2937;
        }
        ::-webkit-scrollbar-thumb {
            background: #4b5563;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }
    </style>
</head>
<body class="bg-gray-900 text-white">

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-4xl">
        
        <!-- Cabeçalho -->
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400">
                Jardeson GFB
            </h1>
            <p class="text-gray-400 mt-2">Seu Gerenciador de Contas de Apostas</p>
        </header>

        <main>
            <!-- Painel de Resumo -->
            <section id="summary" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                <!-- Card Lucro Total -->
                <div class="bg-gray-800 p-6 rounded-xl shadow-lg flex items-center space-x-4">
                    <div class="bg-green-500/20 p-3 rounded-full">
                        <i class="fa-solid fa-dollar-sign fa-2x text-green-400"></i>
                    </div>
                    <div>
                        <p class="text-gray-400 text-sm">Lucro Total</p>
                        <p id="totalProfit" class="text-2xl font-bold">R$ 0,00</p>
                    </div>
                </div>
                <!-- Card Total de Lançamentos -->
                <div class="bg-gray-800 p-6 rounded-xl shadow-lg flex items-center space-x-4">
                    <div class="bg-blue-500/20 p-3 rounded-full">
                        <i class="fa-solid fa-list-check fa-2x text-blue-400"></i>
                    </div>
                    <div>
                        <p class="text-gray-400 text-sm">Lançamentos</p>
                        <p id="totalEntries" class="text-2xl font-bold">0</p>
                    </div>
                </div>
                <!-- Card Lucro Médio -->
                <div class="bg-gray-800 p-6 rounded-xl shadow-lg flex items-center space-x-4">
                    <div class="bg-yellow-500/20 p-3 rounded-full">
                        <i class="fa-solid fa-chart-pie fa-2x text-yellow-400"></i>
                    </div>
                    <div>
                        <p class="text-gray-400 text-sm">Lucro Médio</p>
                        <p id="averageProfit" class="text-2xl font-bold">R$ 0,00</p>
                    </div>
                </div>
            </section>

            <!-- Formulário de Cadastro -->
            <section class="bg-gray-800 p-6 rounded-xl shadow-lg mb-8">
                <h2 class="text-2xl font-bold mb-4 text-emerald-400">Novo Lançamento</h2>
                <form id="entryForm" class="grid grid-cols-1 md:grid-cols-2 gap-4 items-end">
                    <!-- Nome do Dono da Conta -->
                    <div>
                        <label for="userName" class="block mb-2 text-sm font-medium text-gray-300">Nome do Dono da Conta</label>
                        <input type="text" id="userName" name="userName" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 focus:ring-emerald-500 focus:border-emerald-500 transition" placeholder="Ex: João da Silva" required>
                    </div>

                    <!-- Casa de Aposta -->
                    <div>
                        <label for="bettingHouse" class="block mb-2 text-sm font-medium text-gray-300">Casa de Aposta</label>
                        <select id="bettingHouse" name="bettingHouse" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 focus:ring-emerald-500 focus:border-emerald-500 transition" required>
                            <option value="Bet365">Bet365</option>
                            <option value="Betano">Betano</option>
                            <option value="Superbet">Superbet</option>
                        </select>
                    </div>

                    <!-- Lucro -->
                    <div>
                        <label for="profit" class="block mb-2 text-sm font-medium text-gray-300">Lucro (R$)</label>
                        <input type="number" id="profit" name="profit" step="0.01" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 focus:ring-emerald-500 focus:border-emerald-500 transition" placeholder="Ex: 150.50" required>
                    </div>
                    
                    <!-- Botão de Adicionar -->
                    <div class="md:col-span-2">
                        <button type="submit" class="w-full bg-gradient-to-r from-emerald-500 to-cyan-500 hover:from-emerald-600 hover:to-cyan-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-transform transform hover:scale-105">
                            <i class="fas fa-plus-circle mr-2"></i> Adicionar Lançamento
                        </button>
                    </div>
                </form>
            </section>

            <!-- Tabela de Lançamentos -->
            <section>
                 <h2 class="text-2xl font-bold mb-4 text-cyan-400">Histórico de Lançamentos</h2>
                 <div class="bg-gray-800 rounded-xl shadow-lg overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead class="bg-gray-700/50">
                                <tr>
                                    <th class="p-4 font-semibold">Dono da Conta</th>
                                    <th class="p-4 font-semibold">Casa de Aposta</th>
                                    <th class="p-4 font-semibold">Lucro</th>
                                    <th class="p-4 font-semibold">Data e Hora</th>
                                    <th class="p-4 font-semibold text-center">Ações</th>
                                </tr>
                            </thead>
                            <tbody id="entriesTableBody">
                                <!-- As linhas da tabela serão inseridas aqui via JavaScript -->
                                <!-- Exemplo de linha vazia -->
                                <!-- 
                                <tr id="empty-state" class="hidden">
                                     <td colspan="5" class="text-center text-gray-500 p-8">
                                        <i class="fas fa-folder-open fa-3x mb-2"></i>
                                        <p>Nenhum lançamento cadastrado ainda.</p>
                                    </td>
                                </tr> 
                                -->
                            </tbody>
                        </table>
                    </div>
                 </div>
            </section>

        </main>
    </div>

    <!-- Modal de Confirmação de Exclusão -->
    <div id="deleteModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-50 transition-opacity duration-300 opacity-0">
        <div class="bg-gray-800 rounded-xl shadow-xl p-6 w-full max-w-sm transform transition-all duration-300 scale-95 opacity-0" id="modal-content">
            <h3 class="text-lg font-bold text-white mb-4">Confirmar Exclusão</h3>
            <p class="text-gray-300 mb-6">Você tem certeza que deseja apagar este lançamento? Esta ação não pode ser desfeita.</p>
            <div class="flex justify-end space-x-4">
                <button id="cancelDelete" class="px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg text-white font-medium transition-transform transform hover:scale-105">Cancelar</button>
                <button id="confirmDelete" class="px-4 py-2 bg-red-600 hover:bg-red-500 rounded-lg text-white font-medium transition-transform transform hover:scale-105">Apagar</button>
            </div>
        </div>
    </div>

    <!-- Script principal da aplicação -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const entryForm = document.getElementById('entryForm');
            const entriesTableBody = document.getElementById('entriesTableBody');
            const totalProfitEl = document.getElementById('totalProfit');
            const totalEntriesEl = document.getElementById('totalEntries');
            const averageProfitEl = document.getElementById('averageProfit');
            const deleteModal = document.getElementById('deleteModal');
            const modalContent = document.getElementById('modal-content');
            const confirmDeleteBtn = document.getElementById('confirmDelete');
            const cancelDeleteBtn = document.getElementById('cancelDelete');
            let entryIdToDelete = null;

            // Função para buscar os dados do localStorage
            const getEntries = () => {
                return JSON.parse(localStorage.getItem('bettingEntries')) || [];
            };

            // Função para salvar os dados no localStorage
            const saveEntries = (entries) => {
                localStorage.setItem('bettingEntries', JSON.stringify(entries));
            };

            // Função para formatar valores como moeda brasileira (BRL)
            const formatCurrency = (value) => {
                return value.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
            };

            // Função para atualizar o painel de resumo
            const updateSummary = () => {
                const entries = getEntries();
                const totalProfit = entries.reduce((sum, entry) => sum + entry.profit, 0);
                const totalEntries = entries.length;
                const averageProfit = totalEntries > 0 ? totalProfit / totalEntries : 0;

                totalProfitEl.textContent = formatCurrency(totalProfit);
                totalEntriesEl.textContent = totalEntries;
                averageProfitEl.textContent = formatCurrency(averageProfit);
            };

            // Função para renderizar as entradas na tabela
            const renderEntries = () => {
                const entries = getEntries();
                entriesTableBody.innerHTML = ''; // Limpa a tabela antes de renderizar

                if (entries.length === 0) {
                     entriesTableBody.innerHTML = `
                        <tr>
                             <td colspan="5" class="text-center text-gray-500 p-8">
                                <i class="fas fa-folder-open fa-3x mb-2"></i>
                                <p>Nenhum lançamento cadastrado ainda.</p>
                            </td>
                        </tr>
                     `;
                } else {
                    // Ordena as entradas da mais recente para a mais antiga
                    entries.sort((a, b) => b.id - a.id);

                    entries.forEach(entry => {
                        const row = document.createElement('tr');
                        row.className = 'border-b border-gray-700 hover:bg-gray-700/50 transition-colors fade-in';
                        
                        const date = new Date(entry.date).toLocaleString('pt-BR', {
                            day: '2-digit',
                            month: '2-digit',
                            year: 'numeric',
                            hour: '2-digit',
                            minute: '2-digit'
                        });

                        row.innerHTML = `
                            <td class="p-4">${entry.userName}</td>
                            <td class="p-4">${entry.bettingHouse}</td>
                            <td class="p-4 font-medium text-green-400">${formatCurrency(entry.profit)}</td>
                            <td class="p-4 text-gray-400">${date.replace(',', ' às')}</td>
                            <td class="p-4 text-center">
                                <button data-id="${entry.id}" class="delete-btn text-gray-400 hover:text-red-500 transition-colors">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </td>
                        `;
                        entriesTableBody.appendChild(row);
                    });
                }
                updateSummary();
            };

            // Evento para adicionar uma nova entrada
            entryForm.addEventListener('submit', (e) => {
                e.preventDefault();
                
                const userName = e.target.userName.value.trim();
                const bettingHouse = e.target.bettingHouse.value;
                const profit = parseFloat(e.target.profit.value);

                if (!userName || isNaN(profit) || profit <= 0) {
                    console.error("Dados inválidos");
                    // Futuramente, podemos adicionar um alerta visual aqui
                    return;
                }

                const newEntry = {
                    id: Date.now(), // ID único baseado no timestamp
                    userName,
                    bettingHouse,
                    profit,
                    date: new Date().toISOString()
                };

                const entries = getEntries();
                entries.push(newEntry);
                saveEntries(entries);

                entryForm.reset();
                renderEntries();
            });

            // Função para mostrar/esconder o modal com animação
            const toggleModal = (show) => {
                if (show) {
                    deleteModal.classList.remove('hidden');
                    setTimeout(() => {
                        deleteModal.classList.remove('opacity-0');
                        modalContent.classList.remove('scale-95', 'opacity-0');
                    }, 10);
                } else {
                    deleteModal.classList.add('opacity-0');
                    modalContent.classList.add('scale-95', 'opacity-0');
                    setTimeout(() => {
                        deleteModal.classList.add('hidden');
                        entryIdToDelete = null;
                    }, 300);
                }
            };

            // Evento para abrir o modal de exclusão
            entriesTableBody.addEventListener('click', (e) => {
                const deleteButton = e.target.closest('.delete-btn');
                if (deleteButton) {
                    entryIdToDelete = parseInt(deleteButton.getAttribute('data-id'));
                    toggleModal(true);
                }
            });

            // Evento para o botão de cancelar exclusão
            cancelDeleteBtn.addEventListener('click', () => {
                toggleModal(false);
            });

            // Evento para o botão de confirmar exclusão
            confirmDeleteBtn.addEventListener('click', () => {
                if (entryIdToDelete !== null) {
                    let entries = getEntries();
                    entries = entries.filter(entry => entry.id !== entryIdToDelete);
                    saveEntries(entries);
                    renderEntries();
                    toggleModal(false);
                }
            });

            // Renderização inicial ao carregar a página
            renderEntries();
        });
    </script>
</body>
</html>

